<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>QuickShare — Connect & Send (5 MB)</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Socket.IO client -->
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <!-- QR gen + scan -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode"></script>

  <!-- Inline CSS for badge + green button -->
  <style>
    /* powered badge */
    .powered-badge {
      position: fixed;
      right: 12px;
      bottom: 12px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 6px;
      backdrop-filter: blur(4px);
      z-index: 9999;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      pointer-events: none;
      opacity: 0.95;
    }
    @media (max-width: 420px) {
      .powered-badge { font-size: 11px; padding: 5px 8px; right: 8px; bottom: 8px; }
    }

    /* green download button */
    .download-btn {
      display: inline-block;
      background-color: #28a745;
      color: white;
      padding: 10px 18px;
      border-radius: 6px;
      text-decoration: none;
      font-size: 14px;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }
    .download-btn:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>File Share</h1>
      <p class="sub"></p>
    </header>

    <section class="card" id="connectCard">
      <div class="grid2">
        <div>
          <h3>Your Code</h3>
          <div class="code" id="otp">— — — —</div>
          <canvas id="qr"></canvas>
          <p class="hint">Share this code or QR with the other device.</p>
        </div>
        <div>
          <h3>Connect a Device</h3>
          <div class="joinRow">
            <input id="codeInput" maxlength="4" placeholder="Enter 4-digit code" />
            <button id="btnJoin">Connect</button>
          </div>
          <div class="scanWrap">
            <button id="btnScan">📷 Scan QR</button>
            <div id="reader" class="hidden"></div>
            <button id="stopScan" class="hidden">Stop Scan</button>
          </div>
          <p id="status"></p>
        </div>
      </div>
    </section>

    <section class="card hidden" id="transferCard">
      <h3>Transfer</h3>
      <div class="grid2">
        <div>
          <input type="file" id="fileInput" />
          <button id="sendBtn" disabled>Send</button>
          <progress id="sendProg" value="0" max="100"></progress>
        </div>
        <div>
          <p><strong>Download received file</strong></p>
          <a id="downloadLink" class="download-btn hidden">Download</a>
          <progress id="recvProg" value="0" max="100"></progress>
        </div>
      </div>
      <p class="muted"></p>
    </section>

    <footer><small></small></footer>
  </div>

  <!-- powered badge -->
  <div class="powered-badge">powered by BAPON BARMON</div>

  <script type="module" src="app.js"></script>
  <script>window.BACKEND_URL = "https://file-share-backend-tsev.onrender.com";</script>
</body>
</html>
